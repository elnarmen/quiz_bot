# quiz-bot
В проекте реализован чат бот для проведения викторин в Телеграм и Вконтакте

![vk](https://dvmn.org/filer/canonical/1569215498/325/)

## Установка

Скачайте код:
```sh
git clone https://github.com/elnarmen/quiz_bot.git
```

Перейдите в каталог проекта:
```sh
cd quiz_bot
```

[Установите Python](https://www.python.org/), если этого ещё не сделали.

Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:
```sh
python --version
```
**Важно!** Рекомендуем установить версию Python не ниже 3.10

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`.
Зависит это от операционной системы и от того, установлен ли у вас Python старой второй версии.

## Установка виртуального окружения и настройка зависимостей
В каталоге `quiz_bot/` создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:

- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`


Установите зависимости в виртуальное окружение:
```sh
pip install -r requirements.txt
```
## Переменные окружения
В каталоге `quiz_bot/` создайте файл `.env` для хранения переменных окружения.

Внутри вашего файла `.env` нужно указать следующие настройки:
* `TG_TOKEN` - Ваш токен для бота в телеграме
* `VK_TOKEN`- Ваш токен группы в ВК, который позволит отправлять сообщения пользователю
* `REDIS_HOST` - Адрес хоста вашего сервера базы данных Redis
* `REDIS_PORT` - Номер порта сервера базы данных Redis
* `REDIS_PASSWORD` - Пароль для подключения к базе данных Redis
* `FILE_NAME` - Имя файла, в котором содержатся вопросы и ответы для викторины

#### TG_TOKEN
* Через поиск телеграм найдите бот @BotFather. 
* Отправьте `/start` для получения списока всех его команд.
* Выберите команду /newbot - бот попросит придумать имя вашему новому боту. 
* Сохраните полученный токен в переменной `TELEGRAM_BOT_TOKEN` в файле `.env`:

```
TELEGRAM_TOKEN=<Токен бота>
```

#### VK_TOKEN
* Создайте группу во ВКонтакте
* В настройках группы выберите 'Работа с API'
* Создайте ключ и скопируйте его в файл `.env`

```
VK_TOKEN=<Созданный ключ>
```

#### REDIS_HOST, REDIS_PORT, REDIS_PASSWORD
Для хранения данных пользователя бот использует базу данных Redis. Для подключения к ней нужно получить адрес базы данных, ее порт и пароль.
Самый легкий способ это сделать - зарегистрировать бесплатную версию на облачной платформе [Redis](https://redis.com/)

Порт часто пишется прямо в адресе, через двоеточие: `redis-13965.f18.us-east-4-9.wc1.cloud.redislabs.com:16635`

#### FILE_NAME
Вопросы и ответы для викторины берутся из директории `quiz_questions`. Чтобы выбрать конкретный файл, сохраните его название 
в переменной `FILE_NAME` в файле `.env`. 

## Запуск
### Команды для запуска ботов
Телеграм:
```
python tg_bot.py
```
Вконтакте:
```
python vk_bot.py
```
